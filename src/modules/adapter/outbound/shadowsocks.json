{
  "type": "object",
  "title": "outbound-shadowsocks",
  "definitions": {
    "compatible": { "$ref": "../../../definitions/compatible.json" },
    "types": { "$ref": "../../../definitions/types.json" },
    "patterns": { "$ref": "../../../definitions/patterns.json" },
    "enums": { "$ref": "../../../definitions/enums.json" },
    "basic-option": { "$ref": "./base.json#/definitions/basic-option" },
    "ech-options": { "$ref": "./ech.json#/definitions/ech-options" },
    "smux": { "$ref": "./singmux.json" },
    "simple-obfs-option": {
      "type": "object",
      "title": "简易混淆配置",
      "properties": {
        "mode": {
          "enums": ["tls", "http"],
          "title": "混淆模式",
          "description": "混淆模式",
          "markdownDescription": "混淆模式"
        },
        "host": {
          "$ref": "#/definitions/patterns/server",
          "title": "主机地址",
          "description": "主机地址",
          "markdownDescription": "主机地址",
          "default": "bing.com"
        }
      }
    },
    "v2ray-obfs-option": {
      "type": "object",
      "title": "v2ray混淆配置",
      "required": ["mode"],
      "properties": {
        "mode": {
          "const": "websocket",
          "title": "混淆模式",
          "description": "混淆模式",
          "markdownDescription": "混淆模式"
        },
        "host": {
          "$ref": "#/definitions/patterns/server",
          "title": "主机地址",
          "description": "主机地址",
          "markdownDescription": "主机地址",
          "default": "bing.com"
        },
        "path": {
          "$ref": "#/definitions/compatible/string",
          "title": "路径",
          "description": "路径",
          "markdownDescription": "路径",
          "default": "/"
        },
        "tls": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用TLS",
          "description": "启用TLS",
          "markdownDescription": "启用`TLS`"
        },
        "ech-opts": { "$ref": "#/definitions/ech-options" },
        "fingerprint": {
          "$ref": "#/definitions/enums/fingerprint",
          "title": "指纹",
          "description": "指纹",
          "markdownDescription": "指纹"
        },
        "certificate": {
          "$ref": "#/definitions/compatible/string",
          "title": "证书或证书路径",
          "description": "PEM格式",
          "markdownDescription": "PEM格式"
        },
        "private-key": {
          "$ref": "#/definitions/compatible/string",
          "title": "私钥",
          "description": "私钥",
          "markdownDescription": "私钥"
        },
        "headers": {
          "type": "object",
          "title": "请求头",
          "description": "请求头",
          "markdownDescription": "请求头"
        },
        "skip-cert-verify": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "跳过证书验证",
          "description": "跳过证书验证",
          "markdownDescription": "跳过证书验证"
        },
        "mux": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用多路复用",
          "description": "启用多路复用",
          "markdownDescription": "启用多路复用",
          "default": true
        },
        "v2ray-http-upgrade": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用HTTP协议升级",
          "description": "通过HTTP协议与客户端进行通信,并在需要时升级到更高级的协议",
          "markdownDescription": "通过HTTP协议与客户端进行通信,并在需要时升级到更高级的协议"
        },
        "v2ray-http-upgrade-fast-open": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用TFO(TCP Fast Open)",
          "description": "启用TFO(TCP Fast Open)",
          "markdownDescription": "启用`TFO`(TCP Fast Open)"
        }
      }
    },
    "shadow-tls-option": {
      "type": "object",
      "title": "shadow-tls配置",
      "required": ["password", "host"],
      "properties": {
        "password": {
          "$ref": "#/definitions/compatible/string",
          "title": "密码",
          "description": "密码",
          "markdownDescription": "密码"
        },
        "host": {
          "$ref": "#/definitions/patterns/server",
          "title": "主机地址",
          "description": "主机地址",
          "markdownDescription": "主机地址"
        },
        "fingerprint": {
          "$ref": "#/definitions/enums/fingerprint",
          "title": "指纹",
          "description": "指纹",
          "markdownDescription": "指纹"
        },
        "certificate": {
          "$ref": "#/definitions/compatible/string",
          "title": "证书或证书路径",
          "description": "PEM格式",
          "markdownDescription": "PEM格式"
        },
        "private-key": {
          "$ref": "#/definitions/compatible/string",
          "title": "私钥",
          "description": "私钥",
          "markdownDescription": "私钥"
        },
        "skip-cert-verify": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "跳过证书验证",
          "description": "跳过证书验证",
          "markdownDescription": "跳过证书验证"
        },
        "version": {
          "enum": [1, 2, 3],
          "title": "版本",
          "description": "版本",
          "markdownDescription": "版本",
          "default": 2
        },
        "alpn": {
          "$ref": "#/definitions/types/stringArray",
          "title": "ALPN",
          "description": "Application-Layer Protocol Negotiation(应用层协议协商)",
          "markdownDescription": "Application-Layer Protocol Negotiation(应用层协议协商)"
        }
      }
    },
    "restls-option": {
      "type": "object",
      "title": "restls配置",
      "required": ["password", "host", "version-hint"],
      "properties": {
        "password": {
          "$ref": "#/definitions/compatible/string",
          "title": "密码",
          "description": "密码",
          "markdownDescription": "密码"
        },
        "host": {
          "$ref": "#/definitions/patterns/server",
          "title": "主机地址",
          "description": "主机地址",
          "markdownDescription": "主机地址"
        },
        "version-hint": {
          "$ref": "#/definitions/compatible/string",
          "title": "版本",
          "description": "版本",
          "markdownDescription": "版本"
        },
        "restls-script": {
          "$ref": "#/definitions/compatible/string",
          "title": "Restls脚本",
          "description": "Restls脚本隐藏代理流量行为",
          "markdownDescription": "[Restls脚本隐藏代理流量行为](https://github.com/3andne/restls/blob/main/Restls-Script%3A%20Hide%20Your%20Proxy%20Traffic%20Behavior.md)"
        }
      }
    },
    "gost-obfs-option": {
      "type": "object",
      "title": "gost混淆配置",
      "required": ["mode"],
      "properties": {
        "mode": {
          "const": "websocket",
          "title": "混淆模式",
          "description": "混淆模式",
          "markdownDescription": "混淆模式"
        },
        "host": {
          "$ref": "#/definitions/patterns/server",
          "title": "主机地址",
          "description": "主机地址",
          "markdownDescription": "主机地址",
          "default": "bing.com"
        },
        "path": {
          "$ref": "#/definitions/compatible/string",
          "title": "路径",
          "description": "路径",
          "markdownDescription": "路径",
          "default": "/"
        },
        "tls": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用TLS",
          "description": "启用TLS",
          "markdownDescription": "启用`TLS`"
        },
        "ech-opts": { "$ref": "#/definitions/ech-options" },
        "fingerprint": {
          "$ref": "#/definitions/enums/fingerprint",
          "title": "指纹",
          "description": "指纹",
          "markdownDescription": "指纹"
        },
        "certificate": {
          "$ref": "#/definitions/compatible/string",
          "title": "证书或证书路径",
          "description": "PEM格式",
          "markdownDescription": "PEM格式"
        },
        "private-key": {
          "$ref": "#/definitions/compatible/string",
          "title": "私钥",
          "description": "私钥",
          "markdownDescription": "私钥"
        },
        "headers": {
          "type": "object",
          "title": "请求头",
          "description": "请求头",
          "markdownDescription": "请求头"
        },
        "skip-cert-verify": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "跳过证书验证",
          "description": "跳过证书验证",
          "markdownDescription": "跳过证书验证"
        },
        "mux": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用多路复用",
          "description": "启用多路复用",
          "markdownDescription": "启用多路复用",
          "default": true
        }
      }
    },
    "kcptun-option": {
      "type": "object",
      "title": "kcptun插件配置",
      "properties": {
        "key": {
          "$ref": "#/definitions/compatible/string",
          "title": "密钥",
          "description": "密钥",
          "markdownDescription": "密钥",
          "default": "it's a secrect"
        },
        "crypt": {
          "enum": [
            "null",
            "tea",
            "xor",
            "none",
            "aes-128",
            "aes-192",
            "blowfish",
            "twofish",
            "cast5",
            "3des",
            "xtea",
            "salsa20",
            "aes"
          ],
          "title": "加密方式",
          "description": "加密方式",
          "markdownDescription": "加密方式",
          "default": "aes"
        },
        "mode": {
          "enum": ["normal", "fast", "fast2", "fast3"],
          "markdownEnumDescriptions": [
            "普通模式",
            "快速模式",
            "高速模式",
            "极速模式"
          ],
          "title": "预设模式",
          "description": "用于快速配置参数，也可手动配置参数",
          "markdownDescription": "用于快速配置参数，也可手动配置参数",
          "default": "fast"
        },
        "conn": {
          "$ref": "#/definitions/compatible/integer",
          "title": "UDP 连接数",
          "description": "UDP 连接数",
          "markdownDescription": "UDP 连接数",
          "default": 1
        },
        "autoexpire": {
          "$ref": "#/definitions/compatible/integer",
          "title": "自动过期时间",
          "description": "单位:s",
          "markdownDescription": "单位:s",
          "default": 0
        },
        "scavengettl": {
          "$ref": "#/definitions/compatible/integer",
          "title": "清理超时连接的时间间隔",
          "description": "单位:s",
          "markdownDescription": "单位:s",
          "default": 600
        },
        "mtu": {
          "$ref": "#/definitions/compatible/integer",
          "title": "最大传输单元",
          "description": "最大传输单元",
          "markdownDescription": "最大传输单元",
          "default": 1350
        },
        "sndwnd": {
          "$ref": "#/definitions/compatible/integer",
          "title": "发送窗口大小",
          "description": "发送窗口大小",
          "markdownDescription": "发送窗口大小",
          "default": 128
        },
        "rcvwnd": {
          "$ref": "#/definitions/compatible/integer",
          "title": "接收窗口大小",
          "description": "接收窗口大小",
          "markdownDescription": "接收窗口大小",
          "default": 512
        },
        "datashard": {
          "$ref": "#/definitions/compatible/integer",
          "title": "数据分片大小",
          "description": "数据分片大小",
          "markdownDescription": "数据分片大小",
          "default": 10
        },
        "parityshard": {
          "$ref": "#/definitions/compatible/integer",
          "title": "纠错分片大小",
          "description": "纠错分片大小",
          "markdownDescription": "纠错分片大小",
          "default": 3
        },
        "dscp": {
          "$ref": "#/definitions/compatible/integer",
          "title": "差分服务代码点（Differentiated Services Code Point）",
          "description": "6bit",
          "markdownDescription": "6bit"
        },
        "nocomp": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "禁用数据压缩",
          "description": "禁用数据压缩",
          "markdownDescription": "禁用数据压缩"
        },
        "acknodelay": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用ACK快速发送",
          "description": "启用ACK快速发送",
          "markdownDescription": "启用ACK快速发送"
        },
        "nodelay": {
          "$ref": "#/definitions/compatible/integer",
          "title": "禁用 Nagle 算法",
          "description": "禁用 Nagle 算法",
          "markdownDescription": "禁用 Nagle 算法"
        },
        "interval": {
          "$ref": "#/definitions/compatible/integer",
          "title": "发送数据包间隔",
          "description": "单位:ms",
          "markdownDescription": "单位:ms",
          "default": 50
        },
        "resend": {
          "$ref": "#/definitions/compatible/integer",
          "title": "快速重传机制触发阈值",
          "description": "快速重传机制触发阈值",
          "markdownDescription": "快速重传机制触发阈值",
          "default": 2
        },
        "nc": {
          "$ref": "#/definitions/compatible/integer",
          "title": "禁用拥塞控制",
          "description": "禁用拥塞控制",
          "markdownDescription": "禁用拥塞控制"
        },
        "sockbuf": {
          "$ref": "#/definitions/compatible/integer",
          "title": "套接字缓冲区大小",
          "description": "单位:bytes",
          "markdownDescription": "单位:bytes",
          "default": 4194304
        },
        "smuxver": {
          "$ref": "#/definitions/compatible/integer",
          "title": "SMUX 协议版本",
          "description": "SMUX 协议版本",
          "markdownDescription": "SMUX 协议版本",
          "default": 1
        },
        "smuxbuf": {
          "$ref": "#/definitions/compatible/integer",
          "title": "SMUX 多路复用缓冲区大小",
          "description": "单位:bytes",
          "markdownDescription": "单位:bytes",
          "default": 4194304
        },
        "streambuf": {
          "$ref": "#/definitions/compatible/integer",
          "title": "单个流的缓冲区大小",
          "description": "单位:bytes",
          "markdownDescription": "单位:bytes",
          "default": 4194304
        },
        "keepalive": {
          "$ref": "#/definitions/compatible/integer",
          "title": "保活间隔",
          "description": "单位:s",
          "markdownDescription": "单位:s",
          "default": 10
        }
      }
    }
  },
  "allOf": [
    { "title": "basic配置", "$ref": "#/definitions/basic-option" },
    {
      "type": "object",
      "title": "shadowsocks配置",
      "required": ["name", "server", "port", "password", "cipher"],
      "properties": {
        "type": {
          "$ref": "#/definitions/compatible/string",
          "title": "代理节点类型",
          "description": "代理节点类型",
          "markdownDescription": "代理节点类型"
        },
        "name": {
          "$ref": "#/definitions/compatible/string",
          "title": "代理节点名称",
          "description": "代理节点名称",
          "markdownDescription": "代理节点名称"
        },
        "server": {
          "$ref": "#/definitions/patterns/server",
          "title": "代理节点服务器",
          "description": "域名或IP",
          "markdownDescription": "域名或IP"
        },
        "port": {
          "$ref": "#/definitions/patterns/port",
          "title": "代理节点端口号",
          "description": "代理节点端口号",
          "markdownDescription": "代理节点端口号"
        },
        "password": {
          "$ref": "#/definitions/compatible/string",
          "title": "密码",
          "description": "认证密码",
          "markdownDescription": "认证密码"
        },
        "cipher": {
          "$ref": "#/definitions/enums/cipher",
          "title": "加密方法",
          "description": "加密方法",
          "markdownDescription": "加密方法"
        },
        "udp": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用UDP",
          "description": "启用UDP",
          "markdownDescription": "启用`UDP`",
          "default": true
        },
        "plugin": {
          "enum": [
            "obfs",
            "v2ray-plugin",
            "shadow-tls",
            "restls",
            "gost-plugin",
            "kcptun"
          ],
          "title": "插件",
          "description": "插件",
          "markdownDescription": "插件"
        },
        "udp-over-tcp": {
          "$ref": "#/definitions/compatible/boolean",
          "title": "启用UDP over TCP",
          "description": "启用UDP over TCP",
          "markdownDescription": "启用UDP over TCP",
          "default": false
        },
        "udp-over-tcp-version": {
          "enum": [0, 1, 2],
          "title": "UDP over TCP的协议版本",
          "description": "UDP over TCP的协议版本",
          "markdownDescription": "UDP over TCP的协议版本",
          "default": 2
        },
        "client-fingerprint": {
          "$ref": "#/definitions/enums/fingerprint",
          "title": "客户端指纹",
          "description": "客户端指纹",
          "markdownDescription": "客户端指纹"
        }
      },
      "allOf": [
        {
          "if": { "properties": { "plugin": { "const": "obfs" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "obfs插件配置",
                "$ref": "#/definitions/simple-obfs-option"
              }
            }
          }
        },
        {
          "if": { "properties": { "plugin": { "const": "v2ray-plugin" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "v2ray-plugin插件配置",
                "$ref": "#/definitions/v2ray-obfs-option"
              }
            }
          }
        },
        {
          "if": { "properties": { "plugin": { "const": "shadow-tls" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "shadow-tls插件配置",
                "$ref": "#/definitions/shadow-tls-option"
              }
            }
          }
        },
        {
          "if": { "properties": { "plugin": { "const": "restls" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "restls插件配置",
                "$ref": "#/definitions/restls-option"
              }
            }
          }
        },
        {
          "if": { "properties": { "plugin": { "const": "gost-plugin" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "gost插件配置",
                "$ref": "#/definitions/gost-obfs-option"
              }
            }
          }
        },
        {
          "if": { "properties": { "plugin": { "const": "kcptun" } } },
          "then": {
            "properties": {
              "plugin-opts": {
                "type": "object",
                "title": "插件配置",
                "description": "kcptun插件配置",
                "$ref": "#/definitions/kcptun-option"
              }
            }
          }
        }
      ]
    },
    {
      "type": "object",
      "title": "smux配置",
      "properties": {
        "smux": { "title": "smux配置", "$ref": "#/definitions/smux" }
      }
    }
  ]
}
